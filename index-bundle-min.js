global=this,function(t){function e(t,e,o,i,r){this.id=t,this.dirname=e,this.filename=e+"/"+o,this.dependencies=i,this.factory=r}for(var o,i={},r=0;r<t.length;r++){var n=t[r];n=t[r]=new e(n[0],n[1],n[2],n[3],n[4]),i[n.filename]=n}return e.prototype._require=function(){var e=this;if(void 0===e.exports){e.exports={};var i=function(o){var i=e.dependencies[o],r=t[i];if(!r)throw new Error("Bundle is missing a dependency: "+o);return r._require()};i.main=o,e.exports=e.factory(i,e.exports,e,e.filename,e.dirname)||e.exports}return e.exports},e.prototype.modules=i,function(t){o=i[t],o._require()}}([["animator.js","blick","animator.js",{raf:19},function(t,e,o,i,r){"use strict";function n(t){var e=this;e._requestAnimation=t||h,e.controllers=[],e._animate=function(){try{e.animate(Date.now())}catch(t){throw e.requestAnimation(),t}}}function s(t,e){this.component=t,this.controller=e,this.measure=!1,this.transition=!1,this.animate=!1,this.draw=!1,this.redraw=!1}var h=t("raf");o.exports=n,n.prototype.requestAnimation=function(){this.requested||this._requestAnimation(this._animate),this.requested=!0},n.prototype.animate=function(t){this.requested=!1;for(var e=0;e<this.controllers.length;e++){var o=this.controllers[e];o.measure&&(o.component.measure(t),o.measure=!1)}for(var e=0;e<this.controllers.length;e++){var o=this.controllers[e];o.transition&&(o.draw||o.redraw?this.requestAnimation():(o.component.transition(t),o.transition=!1))}for(var e=0;e<this.controllers.length;e++){var o=this.controllers[e];o.animate&&(o.component.animate(t),this.requestAnimation())}for(var e=0;e<this.controllers.length;e++){var o=this.controllers[e];o.draw&&(o.component.draw(t),o.draw=!1)}for(var e=0;e<this.controllers.length;e++){var o=this.controllers[e];o.redraw&&(o.component.redraw(t),o.redraw=!1)}},n.prototype.add=function(t){var e=new s(t,this);return this.controllers.push(e),e},s.prototype.destroy=function(){},s.prototype.requestMeasure=function(){if(!this.component.measure)throw new Error("Can't requestMeasure because component does not implement measure");this.measure=!0,this.controller.requestAnimation()},s.prototype.cancelMeasure=function(){this.measure=!1},s.prototype.requestTransition=function(){if(!this.component.transition)throw new Error("Can't requestTransition because component does not implement transition");this.transition=!0,this.controller.requestAnimation()},s.prototype.cancelTransition=function(){this.transition=!1},s.prototype.requestAnimation=function(){if(!this.component.animate)throw new Error("Can't requestAnimation because component does not implement animate");this.animate=!0,this.controller.requestAnimation()},s.prototype.cancelAnimation=function(){this.animate=!1},s.prototype.requestDraw=function(){if(!this.component.draw)throw new Error("Can't requestDraw because component does not implement draw");this.draw=!0,this.controller.requestAnimation()},s.prototype.cancelDraw=function(){this.draw=!1},s.prototype.requestRedraw=function(){if(!this.component.redraw)throw new Error("Can't requestRedraw because component does not implement redraw");this.redraw=!0,this.controller.requestAnimation()},s.prototype.cancelRedraw=function(){this.redraw=!1}}],["ready.js","domready","ready.js",{},function(t,e,o,i,r){!function(t,e){"undefined"!=typeof o?o.exports=e():"function"==typeof define&&"object"==typeof define.amd?define(e):this[t]=e()}("domready",function(){var t,e=[],o=document,i=o.documentElement.doScroll,r="DOMContentLoaded",n=(i?/^loaded|^c/:/^loaded|^i|^c/).test(o.readyState);return n||o.addEventListener(r,t=function(){for(o.removeEventListener(r,t),n=1;t=e.shift();)t()}),function(t){n?setTimeout(t,0):e.push(t)}})}],["window.js","global","window.js",{},function(t,e,o,i,r){"undefined"!=typeof window?o.exports=window:"undefined"!=typeof global?o.exports=global:"undefined"!=typeof self?o.exports=self:o.exports={}}],["document.js","gutentag","document.js",{koerper:17},function(t,e,o,i,r){"use strict";o.exports=t("koerper")}],["scope.js","gutentag","scope.js",{},function(t,e,o,i,r){"use strict";function n(){this.root=this,this.components=Object.create(null),this.componentsFor=Object.create(null)}o.exports=n,n.prototype.nest=function(){var t=Object.create(this);return t.parent=this,t.caller=this.caller&&this.caller.nest(),t},n.prototype.nestComponents=function(){var t=this.nest();return t.components=Object.create(this.components),t.componentsFor=Object.create(this.componentsFor),t},n.prototype.set=function(t,e){console.log((new Error).stack),this.hookup(t,e)},n.prototype.hookup=function(t,e){var o=this;o.components[t]=e,o["this"].hookup?o["this"].hookup(t,e,o):o["this"].add&&o["this"].add(e,t,o);var i=o["this"].exports&&o["this"].exports[t];if(i){var r=o.caller.id;o.caller.hookup(r+":"+i,e)}}}],["ant.js","hexant","ant.js",{"./coord.js":7},function(t,e,o,i,r){"use strict";function n(t){this.world=t,this.pos=h(0,0,0),this.dir=0,this.headColor="#eee",this.bodyColor="#ccc",this.size=.5,this.rules=[-1,1]}var s=t("./coord.js"),h=s.CubePoint;o.exports=n,n.prototype.step=function(){var t=this.world.tile,e=t.get(this.pos)||1,o=this.rules[(e-1)%this.rules.length];e=t.set(this.pos,1+e%this.world.cellColors.length),this.dir=(h.basis.length+this.dir+o)%h.basis.length,this.pos.add(h.basis[this.dir])},n.prototype.stepDraw=function(){var t=this.world.tile,e=t.get(this.pos)||1,o=this.rules[(e-1)%this.rules.length];e=t.set(this.pos,1+e%this.world.cellColors.length),this.dir=(h.basis.length+this.dir+o)%h.basis.length,this.world.drawCell(this.pos,e),this.pos.add(h.basis[this.dir]),this.redraw()},n.prototype.redraw=function(){var t=this.world.hexGrid.ctxHex,e=t.ctx2d,o=this.dir,i=this.dir+1,r=this.world.hexGrid.toScreen(this.pos),n=this.world.hexGrid.cellSize*this.size;e.fillStyle=this.headColor,e.strokeStyle=this.headColor,e.lineWidth=n/2,e.beginPath(),t.wedge(r.x,r.y,n,o,i,!1),e.closePath(),e.fill(),e.stroke(),e.fillStyle=this.bodyColor,e.beginPath(),t.wedge(r.x,r.y,n,o,i,!0),e.closePath(),e.fill(),this.world.labeled&&this.world.drawCellLabel(this.pos,r)}}],["colorgen.js","hexant","colorgen.js",{},function(t,e,o,i,r){"use strict";function n(t,e){var o=(100*t).toFixed(1)+"%",i=(100*e).toFixed(1)+"%",r=", "+o+", "+i+")";return function(t){for(var e=360/t,o=[],i=0;t>i;i++){var n=Math.floor(i*e).toString();o.push("hsl("+n+r)}return o}}o.exports=n}],["coord.js","hexant","coord.js",{},function(t,e,o,i,r){"use strict";function n(t,e){return this instanceof n?(this.x=t,void(this.y=e)):new n(t,e)}function s(t,e,o){if(!(this instanceof s))return new s(t,e,o);if(t+e+o!==0)throw new Error("CubePoint invariant violated: "+t+" + "+e+" + "+o+" = "+(t+e+o));this.x=t,this.y=e,this.z=o}function h(t,e){return this instanceof h?(this.q=t,void(this.r=e)):new h(t,e)}function a(t,e){return this instanceof a?(this.topLeft=t?t.toOddQOffset():h(),void(this.bottomRight=e?e.toOddQOffset():h())):new a(t,e)}o.exports.ScreenPoint=n,o.exports.CubePoint=s,o.exports.OddQOffset=h,o.exports.OddQBox=a,n.prototype.type="point.screen",n.prototype.copy=function(){return n(this.x,this.y)},n.prototype.copyFrom=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.toString=function(){return"ScreenPoint("+this.x+", "+this.y+")"},n.prototype.toScreen=function(){return this},n.prototype.scale=function(t){return this.x*=t,this.y*=t,this},n.prototype.mulBy=function(t,e){return this.x*=t,this.y*=e,this},n.prototype.add=function(t){return t.type!==this.type&&(t=t.toScreen()),this.x+=t.x,this.y+=t.y,this},n.prototype.sub=function(t){return t.type!==this.type&&(t=t.toScreen()),this.x-=t.x,this.y-=t.y,this},s.basis=[s(1,-1,0),s(0,-1,1),s(-1,0,1),s(-1,1,0),s(0,1,-1),s(1,0,-1)],s.prototype.type="point.cube",s.prototype.toString=function(){return"CubePoint("+this.x+", "+this.y+", "+this.z+")"},s.prototype.copy=function(){return s(this.x,this.y,this.z)},s.prototype.add=function(t){return t.type!==this.type&&(t=t.toCube()),this.x+=t.x,this.y+=t.y,this.z+=t.z,this},s.prototype.sub=function(t){return t.type!==this.type&&(t=t.toCube()),this.x-=t.x,this.y-=t.y,this.z-=t.z,this},s.prototype.toScreen=function(){var t=1.5*this.x,e=Math.sqrt(3)*(this.z+this.x/2);return n(t,e)},s.prototype.toCube=function(){return this},s.prototype.toOddQOffset=function(){var t=this.x,e=this.z+(this.x-(1&this.x))/2;return h(t,e)},h.prototype.type="offset.odd-q",h.prototype.toString=function(){return"OddQOffset("+this.q+", "+this.r+")"},h.prototype.copy=function(){return h(this.q,this.r)},h.prototype.copyFrom=function(t){return t.type!==this.type?this.copyFrom(t.toOddQOffset()):(this.q=t.q,this.r=t.r,this)},h.prototype.add=function(t){return t.type!==this.type&&(t=t.toOddQOffset()),this.q+=t.q,this.r+=t.r,this},h.prototype.sub=function(t){return t.type!==this.type&&(t=t.toOddQOffset()),this.q-=t.q,this.r-=t.r,this},h.prototype.mulBy=function(t,e){return this.q*=t,this.r*=e,this},h.prototype.toScreen=function(){var t=1.5*this.q,e=Math.sqrt(3)*(this.r+.5*(1&this.q));return n(t,e)},h.prototype.toOddQOffset=function(){return this},h.prototype.toCube=function(){var t=this.q,e=this.r-(this.q-(1&this.q))/2,o=-t-e;return s(t,o,e)},a.prototype.copy=function(){return new a(this.topLeft.copy(),this.bottomRight.copy())},a.prototype.copyFrom=function(t){return this.topLeft.copy(t.topLeft),this.bottomRight.copy(t.bottomRight),this},a.prototype.toString=function(){return"OddQBox("+this.topLeft.toString()+", "+this.bottomRight.toString()+")"},a.prototype.screenCount=function(){var t=this.bottomRight.q-this.topLeft.q,e=this.bottomRight.r-this.topLeft.r,o=(3*t+1)/4,i=e+(t>1?.5:0);return n(o,i)},a.prototype.contains=function(t){var e=t.toOddQOffset();return e.q>=this.topLeft.q&&e.q<this.bottomRight.q&&e.r>=this.topLeft.r&&e.r<this.bottomRight.r},a.prototype.expandTo=function(t){var e=!1,o=t.toOddQOffset();return o.q<this.topLeft.q?(this.topLeft.q=o.q,e=!0):o.q>=this.bottomRight.q&&(this.bottomRight.q=o.q+1,e=!0),o.r<this.topLeft.r?(this.topLeft.r=o.r,e=!0):o.r>=this.bottomRight.r&&(this.bottomRight.r=o.r+1,e=!0),e}}],["hash.js","hexant","hash.js",{},function(t,e,o,i,r){"use strict";function n(t){this.window=t}function s(t){return""!==t}o.exports=n,n.prototype.parse=function(){return this.window.location.hash.slice(1).split("&")},n.prototype.get=function(t,e){for(var o=this.parse(),i=0;i<o.length;i++){var r=o[i].split("=");if(unescape(r[0])===t){var n=unescape(r[1]);return void 0===n||"true"===n?!0:"false"===n?!1:"null"===n?null:n}}return this.set(t,e)},n.prototype.set=function(t,e){var o=""+escape(t);e===!1?o="":e!==!0&&(o+="="+escape(e));for(var i=!1,r=this.parse(),n=0;n<r.length;n++){var h=r[n].split("=");if(h[0]===t){i=!0,r[n]=o;break}}return i||r.push(o),r=r.filter(s),this.window.location.hash=r.join("&"),e}}],["hexant.html","hexant","hexant.html",{"./hexant.js":10},function(t,e,o,i,r){"use strict";var n=t("./hexant.js"),s=function(t,e){n.apply(this,arguments);var o=t.ownerDocument,i=this.scope=e.root.nestComponents();i.caller=e,i["this"]=this;var r,s,h=t,a=[];r=o.createElement("CANVAS"),h.appendChild(r),s=r.actualNode,i.hookup("view",s),s.setAttribute&&s.setAttribute("id","view_hh6m15"),i.componentsFor.view&&i.componentsFor.view.setAttribute("for","view_hh6m15"),s.setAttribute&&s.setAttribute("class","hexant-canvas"),a[a.length]=h,h=r,r=h,h=a[a.length-1],a.length--,this.scope.hookup("this",this)};s.prototype=Object.create(n.prototype),s.prototype.constructor=s,s.prototype.exports={},o.exports=s}],["hexant.js","hexant","hexant.js",{"./world.js":16,"./ant.js":5,"./hash.js":8,"./coord.js":7,"./hextiletree.js":13},function(t,e,o,i,r){"use strict";function n(t,e){e=e.toUpperCase();var o="";return t.rules=e.split("").map(function(t){var e=f[t];return void 0!==e&&(o+=t),e}).filter(function(t){return"number"==typeof t}),o}function s(t,e){function o(t){r.onKeyPress(t)}function i(){r.playpause()}var r=this;this.el=null,this.world=null,this.hash=new p(e.window),this.animator=e.animator.add(this),this.lastFrameTime=null,this.frameRate=0,this.frameInterval=0,this.paused=!0,this.boundOnKeyPress=o,this.boundPlaypause=i}o.exports=s;var h=t("./world.js"),a=t("./ant.js"),p=t("./hash.js"),l=t("./coord.js").OddQOffset,u=t("./hextiletree.js"),c=256,d="W=West, L=Left, A=Ahead, R=Right, E=East, F=Flip",f={W:-2,L:-1,A:0,R:1,E:2,F:3};s.prototype.hookup=function(t,e,o){var i=this;"view"===t&&i.setup(e,o)},s.prototype.setup=function(t,e){this.el=t,this.world=new h(this.el);var o=this.world.addAnt(new a(this.world));o.pos=this.world.tile.centerPoint().toCube(),this.hash.set("rule",n(o,this.hash.get("rule","LR"))),this.el.addEventListener("click",this.boundPlaypause),e.window.addEventListener("keypress",this.boundOnKeyPress),this.setFrameRate(this.hash.get("frameRate",4)),this.world.setLabeled(this.hash.get("labeled",!1)),this.world.defaultCellValue=this.hash.get("drawUnvisited",!1)?1:0},s.prototype.onKeyPress=function(t){switch(t.keyCode){case 32:this.playpause();break;case 35:this.toggleLabeled();break;case 42:console.log(this.world.tile.dump());break;case 43:this.setFrameRate(2*this.frameRate),this.hash.set("frameRate",this.frameRate);break;case 45:this.setFrameRate(Math.max(1,Math.floor(this.frameRate/2))),this.hash.set("frameRate",this.frameRate);break;case 46:this.stepit();break;case 47:var e=this.world.ants[0];this.pause();var o=this.hash.get("rule");o=prompt("New Rules: ("+d+")",o),this.hash.set("rule",n(e,o)),this.world.updateAntColors(),this.reset()}},s.prototype.reset=function(){var t=this.world.ants[0];this.world.tile=new u(l(0,0),2,2),this.world.hexGrid.bounds=this.world.tile.boundingBox().copy(),t.dir=0,t.pos=this.world.tile.centerPoint().toCube(),this.world.tile.set(t.pos,1),this.el.width=this.el.width,this.world.hexGrid.updateSize(),this.world.redraw()},s.prototype.animate=function(t){var e=1;if(this.lastFrameTime){var o=t-this.lastFrameTime;e=Math.min(c,o/this.frameInterval)}else this.lastFrameTime=t;for(var i=0;e>i;i++){this.lastFrameTime+=this.frameInterval;var r=this.step();if(r)throw this.pause(),r}},s.prototype.play=function(){this.lastFrameTime=null,this.animator.requestAnimation(),this.paused=!1},s.prototype.pause=function(){this.lastFrameTime=null,this.animator.cancelAnimation(),this.paused=!0},s.prototype.playpause=function(){this.paused?this.play():this.pause()},s.prototype.stepit=function(){this.paused?this.world.stepDraw():this.pause()},s.prototype.step=function(){try{return this.world.stepDraw(),null}catch(t){return t}},s.prototype.setFrameRate=function(t){this.frameRate=t,this.frameInterval=1e3/this.frameRate},s.prototype.toggleLabeled=function(){this.world.setLabeled(!this.world.labeled),this.world.redraw(),this.hash.set("labeled",this.world.labeled)},s.prototype.resize=function(t,e){this.world.resize(t,e)}}],["hexgrid.js","hexant","hexgrid.js",{"./coord.js":7},function(t,e,o,i,r){"use strict";function n(t,e,o){this.canvas=t,this.ctxHex=e,this.bounds=o||h(),this.cell=a(),this.origin=a(),this.avail=a(),this.cellSize=0}var s=t("./coord.js"),h=s.OddQBox,a=s.ScreenPoint,p=Math.sqrt(3)/2;o.exports=n,n.prototype.internalize=function(t){return t.toScreen().sub(this.bounds.topLeft)},n.prototype.toScreen=function(t){return this.internalize(t).toScreen().scale(this.cellSize).add(this.origin)},n.prototype.cellPath=function(t){var e=this.toScreen(t);return this.ctxHex.full(e.x,e.y,this.cellSize),e},n.prototype.resize=function(t,e){this.avail.x=t,this.avail.y=e,this.updateSize()},n.prototype.updateSize=function(){var t=this.bounds.screenCount();this.cell.x=this.avail.x/t.x,this.cell.y=this.avail.y/t.y;var e=this.cell.x/2,o=this.cell.y/2/p;o>e?(this.cellSize=e,this.cell.y=this.cell.x*p):(this.cellSize=o,this.cell.x=2*this.cellSize),this.origin.copyFrom(this.cell).scale(.5),this.canvas.width=this.cell.x*t.x,this.canvas.height=this.cell.y*t.y,this.canvas.style.width=this.canvas.width+"px",this.canvas.style.height=this.canvas.height+"px"}}],["hextile.js","hexant","hextile.js",{"./coord.js":7},function(t,e,o,i,r){"use strict";function n(t,e,o){this.origin=t.toOddQOffset(),this.width=e,this.height=o,this.data=new Uint8Array(this.width*this.height)}var s=t("./coord.js"),h=s.OddQOffset,a=s.OddQBox;o.exports=n,n.prototype.boundingBox=function(){return a(this.origin,h(this.width,this.height))},n.prototype.centerPoint=function(){return h(this.origin.q+Math.floor(this.width/2),this.origin.r+Math.floor(this.height/2))},n.prototype.pointToIndex=function(t){var e=t.toOddQOffset();return(e.r-this.origin.r)*this.width+(e.q-this.origin.q)},n.prototype.get=function(t){return this.data[this.pointToIndex(t)]},n.prototype.set=function(t,e){return this.data[this.pointToIndex(t)]=e,e},n.prototype.eachDataPoint=function(t){var e,o=this.origin.q,i=this.origin.r,r=o+this.width,n=i+this.height,s=h(o,i);for(e=0,s.r=i;s.r<n;s.r++)for(s.q=o;s.q<r;s.q++,e++)t(s,this.data[e])}}],["hextiletree.js","hexant","hextiletree.js",{"./coord.js":7,"./hextile.js":12},function(t,e,o,i,r){"use strict";function n(t,e,o){this.root=new s(t,e,o)}function s(t,e,o){this.origin=t,this.width=e,this.height=o,this.tileWidth=Math.floor(this.width/2),this.tileHeight=Math.floor(this.height/2),this.tiles=[null,null,null,null];var i=p(this.origin.q-this.tileWidth,this.origin.r-this.tileHeight),r=p(this.origin.q+this.tileWidth,this.origin.r+this.tileHeight);this.box=l(i,r)}var h=t("./coord.js"),a=t("./hextile.js"),p=h.OddQOffset,l=h.OddQBox;o.exports=n;var u=[3,2,1,0],c=[p(0,0),p(1,0),p(0,1),p(1,1)],d=[p(-1,-1),p(1,-1),p(-1,1),p(1,1)];n.prototype.dump=function(){return this.root.dump()},s.prototype.dump=function(){for(var t=["TreeNode @"+this.origin.toString(),"  box: "+this.box.toString()],e=0;e<this.tiles.length;e++){var o=["null"],i=this.tiles[e];i&&(o=i.dump().split(/\n/)),t.push("["+e+"]: "+o[0]);for(var r=1;r<o.length;r++)t.push("     "+o[r])}return t.join("\n")},a.prototype.dump=function(){for(var t=["Tile @"+this.origin.toString()],e=[],o=0;o<this.data.length;o++)o&&o%this.width===0&&(t.push(e.join(" ")),e=[]),e.push(this.data[o].toString());return t.push(e.join(" ")),t.join("\n")},n.prototype.boundingBox=function(){return this.root.boundingBox()},n.prototype.eachDataPoint=function(t){this.root.eachDataPoint(t)},n.prototype.centerPoint=function(){return this.root.centerPoint()},n.prototype.get=function(t){return this.root.get(t)},n.prototype.set=function(t,e){for(var o=t.toOddQOffset();!this.root.box.contains(o);)this.root=this.root.expand();return this.root._set(o,e)},s.prototype.expand=function(){for(var t=new s(this.origin.copy(),2*this.width,2*this.height),e=0;e<this.tiles.length;e++)t.tiles[e]=this.growTile(e);return t},s.prototype.growTile=function(t){var e=this.tiles[t];return e?e.grow(t):null},a.prototype.grow=function(t){var e=c[t].copy().mulBy(this.width,this.height),o=this.origin.copy().add(e),i=new s(o,2*this.width,2*this.height);return i.tiles[u[t]]=this,i},s.prototype.grow=function(t){var e=d[t].copy().mulBy(this.tileWidth,this.tileHeight),o=this.origin.copy().add(e),i=new s(o,2*this.width,2*this.height);return i.tiles[u[t]]=this,i},s.prototype.boundingBox=function(){return this.box},s.prototype.eachDataPoint=function(t){for(var e=0;e<this.tiles.length;e++){var o=this.tiles[e];o?o.eachDataPoint(t):this._fakeDataPoints(e,t)}},s.prototype._fakeDataPoints=function(t,e){var o=1&t,i=t>>1,r=this.origin.q+(o?0:-this.tileWidth),n=this.origin.r+(i?0:-this.tileHeight),s=r+this.tileWidth,h=n+this.tileHeight,a=p(r,n);for(a.r=n;a.r<h;a.r++)for(a.q=r;a.q<s;a.q++)e(a,0)},s.prototype.centerPoint=function(){return this.origin},s.prototype.get=function(t){var e=t.toOddQOffset();if(!this.box.contains(e))return NaN;var o=e.q<this.origin.q?0:1,i=e.r<this.origin.r?0:1,r=2*i+o,n=this.tiles[r];return n?n.get(t):0},s.prototype.set=function(t,e){var o=t.toOddQOffset();if(!this.box.contains(o))throw new Error("set out of bounds");return this._set(o,e)},s.prototype._set=function(t,e){var o=t.q<this.origin.q?0:1,i=t.r<this.origin.r?0:1,r=2*i+o,n=this.tiles[r];if(!n){var s=p(this.origin.q,this.origin.r);t.q<s.q&&(s.q-=this.tileWidth),t.r<s.r&&(s.r-=this.tileHeight),n=new a(s,this.tileWidth,this.tileHeight),this.tiles[r]=n}return n.set(t,e)}}],["index.js","hexant","index.js",{domready:1,"global/window":2,"gutentag/scope":4,"gutentag/document":3,blick:0,"./hexant.html":9},function(t,e,o,i,r){"use strict";function n(){var t=new l;t.window=a,t.animator=new c;var e=new u(a.document.body),o=e.documentElement,i=new d(o,t);a.hexant=i,a.addEventListener("resize",s),s()}function s(){var t=Math.max(p.documentElement.clientWidth,a.innerWidth||0),e=Math.max(p.documentElement.clientHeight,a.innerHeight||0);a.hexant.resize(t,e)}var h=t("domready"),a=t("global/window"),p=a.document,l=t("gutentag/scope"),u=t("gutentag/document"),c=t("blick"),d=t("./hexant.html");h(n)}],["ngoncontext.js","hexant","ngoncontext.js",{},function(t,e,o,i,r){"use strict";function n(t,e){this.ctx2d=e,this.degree=t,this.offset=0,this.step=2*Math.PI/this.degree}o.exports=n,n.prototype.full=function(t,e,o){var i=this.offset;this.ctx2d.moveTo(t+o*Math.cos(i),e+o*Math.sin(i));for(var r=1;r<this.degree;r++)i+=this.step,this.ctx2d.lineTo(t+o*Math.cos(i),e+o*Math.sin(i))},n.prototype.arc=function(t,e,o,i,r,n){var s=0,h=0;if("number"==typeof i&&(s=i%this.degree),"number"==typeof r&&(h=r%this.degree),s===h)return void this.full(t,e,o);if(n)return void this.arc(t,e,o,h,this.degree-s,!1);var a=this.degree+h-s;a>this.degree&&(a-=this.degree);var p=this.offset+this.step*s,l=t+o*Math.cos(p),u=e+o*Math.sin(p);this.ctx2d.moveTo(l,u);for(var c=1;a>=c;c++)p+=this.step,l=t+o*Math.cos(p),u=e+o*Math.sin(p),this.ctx2d.lineTo(l,u)},n.prototype.wedge=function(t,e,o,i,r,n){var s=0,h=0;if("number"==typeof i&&(s=i%this.degree),"number"==typeof r&&(h=r%this.degree),s===h)return void this.full(t,e,o);if(n)return void this.wedge(t,e,o,h,s,!1);var a=this.degree+h-s;a>this.degree&&(a-=this.degree),this.ctx2d.moveTo(t,e);for(var p=this.offset+this.step*s,l=0;a>=l;l++){var u=t+o*Math.cos(p),c=e+o*Math.sin(p);this.ctx2d.lineTo(u,c),p+=this.step}}}],["world.js","hexant","world.js",{"./coord.js":7,"./hexgrid.js":11,"./colorgen.js":6,"./hextiletree.js":13,"./ngoncontext.js":15},function(t,e,o,i,r){"use strict";function n(t){this.canvas=t,this.ctx2d=this.canvas.getContext("2d"),this.ctxHex=new l(6,this.ctx2d),this.cellColorGen=a(.75,.4),this.antBodyColorGen=a(.85,.5),this.antHeadColorGen=a(.95,.6),this.cellColors=[],this.antBodyColors=[],this.antHeadColors=[],this.tile=new p(u(0,0),2,2),this.hexGrid=new h(this.canvas,this.ctxHex,this.tile.boundingBox().copy()),this.ants=[],this.labeled=!1,this.defaultCellValue=0}var s=t("./coord.js"),h=t("./hexgrid.js"),a=t("./colorgen.js"),p=t("./hextiletree.js"),l=t("./ngoncontext.js"),u=s.OddQOffset;o.exports=n,n.prototype.setLabeled=function(t){this.labeled=t,this.labeled?this.drawCell=this.drawLabeledCell:this.drawCell=this.drawUnlabeledCell},n.prototype.step=function(){for(var t,e=0,o=!1;e<this.ants.length&&(t=this.ants[e++],t.step(),!(o=this.hexGrid.bounds.expandTo(t.pos))););for(;e<this.ants.length;)t=this.ants[e++],t.step(),this.hexGrid.bounds.expandTo(t.pos);o&&this.hexGrid.updateSize()},n.prototype.stepDraw=function(){for(var t,e=0,o=!1;e<this.ants.length&&(t=this.ants[e++],t.stepDraw(),!(o=this.hexGrid.bounds.expandTo(t.pos))););for(;e<this.ants.length;)t=this.ants[e++],t.step(),this.hexGrid.bounds.expandTo(t.pos);o&&(this.hexGrid.updateSize(),this.redraw())},n.prototype.resize=function(t,e){this.hexGrid.resize(t,e),this.redraw()},n.prototype.redraw=function(){var t=this;t.tile.eachDataPoint(function(e,o){o=o||t.defaultCellValue,o&&t.drawCell(e,o)});for(var e=0;e<t.ants.length;e++)t.ants[e].redraw()},n.prototype.drawUnlabeledCell=function(t,e){this.ctx2d.beginPath();var o=this.hexGrid.cellPath(t);return this.ctx2d.closePath(),this.ctx2d.fillStyle=this.cellColors[e-1],this.ctx2d.fill(),o},n.prototype.drawLabeledCell=function(t,e){var o=this.drawUnlabeledCell(t,e);this.drawCellLabel(t,o)},n.prototype.drawCellLabel=function(t,e){function o(t,o){var r=i.measureText(t).width;i.strokeText(t,e.x-r/2,e.y+o)}e||(e=this.hexGrid.toScreen(t));var i=this.ctx2d;i.lineWidth=1,i.strokeStyle="#fff",o(t.toCube().toString(),0),o(t.toOddQOffset().toString(),14)},n.prototype.drawCell=n.prototype.drawUnlabeledCell,n.prototype.updateAntColors=function(){this.antBodyColors=this.antBodyColorGen(this.ants.length),this.antHeadColors=this.antHeadColorGen(this.ants.length);for(var t=0,e=0;e<this.ants.length;e++)this.ants[e].bodyColor=this.antBodyColors[e],this.ants[e].headColor=this.antHeadColors[e],t=Math.max(t,this.ants[e].rules.length);this.cellColors=this.cellColorGen(t)},n.prototype.addAnt=function(t){var e=this.tile.get(t.pos);return e||this.tile.set(t.pos,1),this.ants.push(t),this.updateAntColors(),t}}],["koerper.js","koerper","koerper.js",{wizdom:20},function(t,e,o,i,r){"use strict";function n(t){s.call(this,this),this.actualNode=t,this.actualDocument=t.ownerDocument,this.documentElement=this.createBody(),this.documentElement.parentNode=this,t.appendChild(this.documentElement.actualNode),this.firstChild=this.documentElement,this.lastChild=this.documentElement}function s(t){c.call(this,t),this.actualNode=null}function h(t,e,o){c.call(this,t,o),o?this.actualNode=t.actualDocument.createElementNS(o,e):this.actualNode=t.actualDocument.createElement(e),this.attributes=this.actualNode.attributes}function a(t,e){s.call(this,t),this.actualNode=t.actualDocument.createTextNode(e)}function p(t,e){s.call(this,t),this.actualNode=t.actualDocument.createTextNode(""),this.actualFirstChild=null,this.actualBody=t.actualDocument.createElement("BODY")}function l(t,e){s.call(this,t),this.actualFirstChild=e.firstChild}var u=t("wizdom"),c=u.prototype.Node;u.prototype.Element,u.prototype.TextNode;o.exports=n,n.prototype=Object.create(u.prototype),n.prototype.Node=s,n.prototype.Element=h,n.prototype.TextNode=a,n.prototype.Body=p,n.prototype.OpaqueHtml=l,n.prototype.createBody=function(t){return new this.Body(this,t)},n.prototype.getActualParent=function(){return this.actualNode},s.prototype=Object.create(c.prototype),s.prototype.constructor=s,s.prototype.insertBefore=function(t,e){if(e&&e.parentNode!==this)throw new Error("Can't insert before node that is not a child of parent");c.prototype.insertBefore.call(this,t,e);var o,i=this.getActualParent();return e&&(o=e.getActualFirstChild()),o||(o=this.getActualNextSibling()),o&&o.parentNode!==i&&(o=null),i.insertBefore(t.actualNode,o||null),t.inject(),t},s.prototype.removeChild=function(t){if(!t)throw new Error("Can't remove child "+t);t.extract(),this.getActualParent().removeChild(t.actualNode),c.prototype.removeChild.call(this,t)},s.prototype.setAttribute=function(t,e){this.actualNode.setAttribute(t,e)},s.prototype.getAttribute=function(t){this.actualNode.getAttribute(t)},s.prototype.hasAttribute=function(t){this.actualNode.hasAttribute(t)},s.prototype.removeAttribute=function(t){this.actualNode.removeAttribute(t)},s.prototype.addEventListener=function(t,e,o){this.actualNode.addEventListener(t,e,o)},s.prototype.removeEventListener=function(t,e,o){this.actualNode.removeEventListener(t,e,o)},s.prototype.inject=function(){},s.prototype.extract=function(){},s.prototype.getActualParent=function(){return this.actualNode},s.prototype.getActualFirstChild=function(){return this.actualNode},s.prototype.getActualNextSibling=function(){return null},Object.defineProperty(s.prototype,"innerHTML",{get:function(){return this.actualNode.innerHTML}}),h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.nodeType=1,a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.nodeType=3,Object.defineProperty(a.prototype,"data",{set:function(t){this.actualNode.data=t},get:function(){return this.actualNode.data}}),p.prototype=Object.create(s.prototype),p.prototype.constructor=p,p.prototype.nodeType=13,p.prototype.extract=function(){for(var t,e=this.actualBody,o=this.actualNode,i=this.parentNode.getActualParent(),r=this.getActualFirstChild();r&&r!==o;)t=r.nextSibling,e?e.appendChild(r):i.removeChild(r),r=t},p.prototype.inject=function(){if(!this.parentNode)throw new Error("Can't inject without a parent node");for(var t,e=this.actualBody,o=this.actualNode,i=this.parentNode.getActualParent(),r=e.firstChild;r;)t=r.nextSibling,i.insertBefore(r,o),r=t},p.prototype.getActualParent=function(){return this.parentNode?this.parentNode.getActualParent():this.actualBody},p.prototype.getActualFirstChild=function(){return this.firstChild?this.firstChild.getActualFirstChild():this.actualNode},p.prototype.getActualNextSibling=function(){return this.actualNode},Object.defineProperty(p.prototype,"innerHTML",{get:function(){if(this.parentNode){this.extract();var t=this.actualBody.innerHTML;return this.inject(),t}return this.actualBody.innerHTML},set:function(t){return this.parentNode?(this.extract(),this.actualBody.innerHTML=t,this.firstChild=this.lastChild=new l(this.ownerDocument,this.actualBody),this.inject()):(this.actualBody.innerHTML=t,this.firstChild=this.lastChild=new l(this.ownerDocument,this.actualBody)),t}}),l.prototype=Object.create(s.prototype),l.prototype.constructor=l,l.prototype.getActualFirstChild=function(){return this.actualFirstChild}}],["lib/performance-now.js","performance-now/lib","performance-now.js",{},function(t,e,o,i,r){(function(){var t,e,i;"undefined"!=typeof performance&&null!==performance&&performance.now?o.exports=function(){return performance.now()}:"undefined"!=typeof process&&null!==process&&process.hrtime?(o.exports=function(){return(t()-i)/1e6},e=process.hrtime,t=function(){var t;return t=e(),1e9*t[0]+t[1]},i=t()):Date.now?(o.exports=function(){return Date.now()-i},i=Date.now()):(o.exports=function(){return(new Date).getTime()-i},i=(new Date).getTime())}).call(this)}],["index.js","raf","index.js",{"performance-now":18},function(t,e,o,i,r){for(var n=t("performance-now"),s="undefined"==typeof window?{}:window,h=["moz","webkit"],a="AnimationFrame",p=s["request"+a],l=s["cancel"+a]||s["cancelRequest"+a],u=!0,c=0;c<h.length&&!p;c++)p=s[h[c]+"Request"+a],l=s[h[c]+"Cancel"+a]||s[h[c]+"CancelRequest"+a];if(!p||!l){u=!1;var d=0,f=0,y=[],m=1e3/60;p=function(t){if(0===y.length){var e=n(),o=Math.max(0,m-(e-d));d=o+e,setTimeout(function(){var t=y.slice(0);y.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(d)}catch(o){setTimeout(function(){throw o},0)}},Math.round(o))}return y.push({handle:++f,callback:t,cancelled:!1}),f},l=function(t){for(var e=0;e<y.length;e++)y[e].handle===t&&(y[e].cancelled=!0)}}o.exports=function(t){return u?p.call(s,function(){try{t.apply(this,arguments)}catch(e){setTimeout(function(){throw e},0)}}):p.call(s,t)},o.exports.cancel=function(){l.apply(s,arguments)}}],["dom.js","wizdom","dom.js",{},function(t,e,o,i,r){"use strict";function n(t){this.doctype=null,this.documentElement=null,this.namespaceURI=t||""}function s(t){this.ownerDocument=t,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null}function h(t,e){s.call(this,t),this.data=e}function a(t,e){s.call(this,t),this.data=e}function p(t,e,o){s.call(this,t),this.tagName=e,this.namespaceURI=o,this.attributes=new this.ownerDocument.NamedNodeMap}function l(t,e,o){this.ownerDocument=t,this.name=e,this.value=null,this.namespaceURI=o}function u(){this.length=0}o.exports=n,n.prototype.nodeType=9,n.prototype.Node=s,n.prototype.Element=p,n.prototype.TextNode=h,n.prototype.Comment=a,n.prototype.Attr=l,n.prototype.NamedNodeMap=u,n.prototype.createTextNode=function(t){return new this.TextNode(this,t)},n.prototype.createComment=function(t){return new this.Comment(this,t)},n.prototype.createElement=function(t,e){return new this.Element(this,t,e||this.namespaceURI)},n.prototype.createElementNS=function(t,e){return new this.Element(this,e,t||this.namespaceURI)},n.prototype.createAttribute=function(t,e){return new this.Attr(this,t,e||this.namespaceURI)},n.prototype.createAttributeNS=function(t,e){return new this.Attr(this,e,t||this.namespaceURI)},s.prototype.appendChild=function(t){return this.insertBefore(t,null)},s.prototype.insertBefore=function(t,e){if(!t)throw new Error("Can't insert null child");
if(t.ownerDocument!==this.ownerDocument)throw new Error("Can't insert child from foreign document");t.parentNode&&t.parentNode.removeChild(t);var o;o=e?e.previousSibling:this.lastChild,o&&(o.nextSibling=t),e&&(e.previousSibling=t),t.nextSibling=e,t.previousSibling=o,t.parentNode=this,e||(this.lastChild=t),o||(this.firstChild=t)},s.prototype.removeChild=function(t){if(!t)throw new Error("Can't remove null child");var e=t.parentNode;if(e!==this)throw new Error("Can't remove node that is not a child of parent");return t===e.firstChild&&(e.firstChild=t.nextSibling),t===e.lastChild&&(e.lastChild=t.previousSibling),t.previousSibling&&(t.previousSibling.nextSibling=t.nextSibling),t.nextSibling&&(t.nextSibling.previousSibling=t.previousSibling),t.previousSibling=null,t.parentNode=null,t.nextSibling=null,t},h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.nodeType=3,a.prototype=Object.create(s.prototype),a.prototype.constructor=a,a.prototype.nodeType=8,p.prototype=Object.create(s.prototype),p.prototype.constructor=p,p.prototype.nodeType=1,p.prototype.hasAttribute=function(t,e){var o=this.attributes.getNamedItem(t,e);return!!o},p.prototype.getAttribute=function(t,e){var o=this.attributes.getNamedItem(t,e);return o?o.value:null},p.prototype.setAttribute=function(t,e,o){var i=this.ownerDocument.createAttribute(t,o);i.value=e,this.attributes.setNamedItem(i,o)},p.prototype.removeAttribute=function(t,e){this.attributes.removeNamedItem(t,e)},p.prototype.hasAttributeNS=function(t,e){return this.hasAttribute(e,t)},p.prototype.getAttributeNS=function(t,e){return this.getAttribute(e,t)},p.prototype.setAttributeNS=function(t,e,o){this.setAttribute(e,o,t)},p.prototype.removeAttributeNS=function(t,e){this.removeAttribute(e,t)},l.prototype.nodeType=2,u.prototype.getNamedItem=function(t,e){e=e||"";var o=encodeURIComponent(e)+":"+encodeURIComponent(t);return this[o]},u.prototype.setNamedItem=function(t){var e=t.namespaceURI||"",o=t.name,i=encodeURIComponent(e)+":"+encodeURIComponent(o),r=this[i];return r||(this[this.length]=t,this.length++,r=null),this[i]=t,r},u.prototype.removeNamedItem=function(t,e){e=e||"";var o=encodeURIComponent(e)+":"+encodeURIComponent(t),i=this[o];if(!i)throw new Error("Not found");var r=Array.prototype.indexOf.call(this,i);delete this[o],delete this[r],this.length--},u.prototype.item=function(t){return this[t]},u.prototype.getNamedItemNS=function(t,e){return this.getNamedItem(e,t)},u.prototype.setNamedItemNS=function(t){return this.setNamedItem(t)},u.prototype.removeNamedItemNS=function(t,e){return this.removeNamedItem(e,t)}}]])("hexant/index.js");
